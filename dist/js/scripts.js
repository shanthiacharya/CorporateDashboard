"use strict";angular.module("dashMetricsApp",["ui.router","highcharts-ng","datatables"]).config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/");$stateProvider.state("home",{url:"/",templateUrl:"views/overview.html",controller:"MainCtrl as main"});$stateProvider.state("analytics",{url:"/analytics",templateUrl:"views/analytics.html",controller:"LineGraphIssuesAverageCtrl"});$stateProvider.state("reports",{url:"/reports",templateUrl:"views/reports.html",controller:"DatatableCtrl"})}]);angular.module("dashMetricsApp").controller("LineGraphIssuesAverageCtrl",function($scope,$http,$timeout){var categories=[];var seriesdata=[];var timer;var stop;var refreshIssueWeekAverage=function(){categories.length=0;seriesdata.length=0;$http.get("./data/issuesaveragebyweek.json").success(function(data,status,headers,config){$scope.data=data;console.log(data);angular.forEach(data,function(value,key){var xval=data[key].day;var yval=data[key].count;categories.push(xval);seriesdata.push(parseFloat(yval));var poll=function(){$timeout(function(){for(var i=0,t=7;i<t;i++){seriesdata[i]=Math.round(Math.random()*100)}poll()},25*60)};poll()})}).error(function(data,status,headers,config){});stop=$timeout(refreshIssueWeekAverage,100*60);$scope.title="";$scope.chartConfig={options:{chart:{type:"line"},credits:{enabled:false},colors:["#09BD60"],title:{text:""},xAxis:{categories:categories,crosshair:true,tickMarkPlacement:"on",startOnTick:false,endOnTick:false,minPadding:0,maxPadding:0,align:"left"},yAxis:{title:{text:"Count"},lineWidth:2}},plotOptions:{spline:{marker:{enable:false}}},series:[{name:"Number of Issues",data:seriesdata}]}};refreshIssueWeekAverage();$scope.$on("$destroy",function(){$timeout.cancel(timer);stop=undefined;console.log("Cancelled Timer for analytics")})}).controller("DonutChartCtrl",function($scope,$http,$timeout){var xval,yval,i;var chartdata=[];var timer;var stop;var refreshIssueBreakDown=function(){chartdata.length=0;$http.get("./data/issuebreakdown.csv").success(function(data){$scope.main=data;var lines=data.split("\n");angular.forEach(lines,function(value,key){var line=value.toString();var items=line.split(",");if(key!=0){angular.forEach(items,function(item,itemNo){if(itemNo==0&&item!=""){xval=item}else if(itemNo==1&&item!=""){yval=parseFloat(item)}});chartdata.push({name:xval,y:yval})}var poll=function(){$timeout(function(){for(var i=0,t=5;i<t;i++){chartdata[i].y=Math.round(Math.random()*2e3)}poll()},25*60)};poll()})}).error(function(data,status,headers,config){});stop=$timeout(refreshIssueBreakDown,100*60);$scope.title="";$scope.chartConfig={options:{chart:{type:"pie"},colors:["#455C73","#9B59B6","#BDC3C7","#26B99A","#3498DB"]},title:{text:""},tooltip:{pointFormat:" <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{shadow:false,allowPointSelect:true,cursor:"pointer",dataLabels:{enabled:true,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},series:[{colorByPoint:true,innerSize:"70%",data:chartdata}]}};refreshIssueBreakDown();$scope.$on("$destroy",function(){$timeout.cancel(timer);stop=undefined;console.log("Cancelled Timer for analytics")})}).controller("IssueByRegionBarChartCtrl",function($scope,$http,$timeout){var categories=[];var seriesdata=[];var lineNo=0;var timer;var stop;var refreshIssueByRegion=function(){categories.length=0;seriesdata.length=0;$http.get("./data/issuecountbycountry.csv").success(function(data,status,headers,config){$scope.main=data;var lines=data.split("\n");angular.forEach(lines,function(value,key){var line=value.toString();var items=line.split(",");if(key!=0){angular.forEach(items,function(item,itemNo){if(itemNo==0&&item!=""){categories.push(item)}else if(itemNo==1&&item!=""){item=Math.round(Math.random()*1e3);seriesdata.push(parseFloat(item))}})}})}).error(function(data,status,headers,config){});stop=$timeout(refreshIssueByRegion,100*60);$scope.title="";$scope.chartConfig={options:{chart:{type:"column"},colors:["#26B99A","#E33805","#FCD217","#7437A6","#2CD1D1"],title:{text:""},credits:{enabled:false},xAxis:{categories:catgories,crosshair:true},yAxis:{min:0,title:{text:""},stackLabels:{enabled:true,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}}}},plotOptions:{column:{stacking:"normal"}},series:[{data:seriesdata,showInLegend:false}]}};refreshIssueByRegion();$scope.$on("$destroy",function(){$timeout.cancel(timer);stop=undefined;console.log("Cancelled Timer for analytics")})});angular.module("dashMetricsApp").controller("DatatableCtrl",function($scope,$http,DTOptionsBuilder,DTColumnDefBuilder,$timeout){var timer;var stop;var vm=this;vm.issues=[];vm.dtOptions=DTOptionsBuilder.newOptions().withPaginationType("full_numbers").withDisplayLength(25).withOption("responsive",true);vm.dtColumnDefs=[];var refreshIssueDataTable=function(){$http.get("./data/mockdata.json").success(function(issues,status,headers,config){vm.issues=issues;issues.splice(0,Math.round(Math.random()*20))}).error(function(data,status,headers,config){});stop=$timeout(refreshIssueDataTable,100*60)};refreshIssueDataTable();$scope.$on("$destroy",function(){$timeout.cancel(timer);stop=undefined;console.log("Cancelled Timer for datatable")})});"use strict";angular.module("dashMetricsApp").controller("MainCtrl",function($scope,$http,$timeout){var timer;var stop;var refreshKeyMetrics=function(){$http.get("./data/keymetrics.json").success(function(data,status,headers,config){$scope.main=data;for(var i=0,t=20;i<t;i++){data.TotalIssues=Math.round(Math.random()*2e3);data.OpenIssues=Math.round(Math.random()*2e3);data.ClosedIssues=Math.round(Math.random()*2e3);data.ResponseTime=Math.round(Math.random()*2e3);data.TotalCustomers=Math.round(Math.random()*2e3);data.NewCustomers=Math.round(Math.random()*2e3)}}).error(function(data,status,headers,config){});stop=$timeout(refreshKeyMetrics,10*60)};refreshKeyMetrics();$scope.$on("$destroy",function(){$timeout.cancel(stop);stop=undefined;console.log("Cancelled Timer for main")})}).controller("MapController",function($http,$scope,$timeout){var values=[];var i;var valuesMin;var valuesMax;var timer;var stop;var refreshEmployeeMap=function(){$http.get("./data/employeepopulation.json").success(function(data){console.log("Values length:"+data.length);for(i=0;i<data.length;i++){data[i].value=Math.round(Math.random()*2e4);values.push({code:data[i].code,value:data[i].value})}valuesMin=values[0].value;valuesMax=values[0].value;for(var i=0;i<=values.length-1;i++){if(values[i].value>valuesMax){valuesMax=values[i].value}if(values[i].value<valuesMin){valuesMin=values[i].value}}}).error(function(data,status,headers,config){});stop=$timeout(refreshEmployeeMap,100*60)};$scope.config={options:{legend:{layout:"vertical",align:"left",verticalAlign:"bottom"},lang:{thousandsSep:";"},colorAxis:{minColor:"#c4f3e9",maxColor:"#125749",startOnTick:false,endOnTick:false,min:valuesMin,max:valuesMax,minorTickInterval:.1,tickLength:0},plotOptions:{map:{mapData:Highcharts.maps["custom/world"],joinBy:["name"]}},mapNavigation:{enabled:false}},chartType:"map",title:{text:""},plotOptions:{map:{states:{hover:{enabled:false},normal:{animation:false}}}},series:[{name:"Number of Employees",mapData:Highcharts.maps["custom/world"],nullColor:"white",data:values,joinBy:["iso-a2","code"],states:{hover:{color:"#b4f0e3"}}}]};refreshEmployeeMap();$scope.$on("$destroy",function(){$timeout.cancel(timer);stop=undefined;console.log("Cancelled Timer for main")})}).controller("Chart2Ctrl",function($scope,$http,$timeout){var timer;var stop;var categories=[];var seriesdata=[];var refreshCustomerCount=function(){var lineNo=0;console.log("Bar Chart refresh before");categories.length=0;seriesdata.length=0;$http.get("./data/customercount.csv").success(function(data,status,headers,config){$scope.main=data;var lines=data.split("\n");angular.forEach(lines,function(value,key){var line=value.toString();var items=line.split(",");if(key!=0){angular.forEach(items,function(item,itemNo){if(itemNo==0&&item!=""){categories.push(item)}else if(itemNo==1&&item!=""){item=Math.round(Math.random()*2e3);seriesdata.push(parseFloat(item))}})}})}).error(function(data,status,headers,config){});stop=$timeout(refreshCustomerCount,100*60)};$scope.title="";$scope.chartConfig={options:{chart:{type:"column"},colors:["#26B99A","#E33805","#FCD217","#7437A6","#2CD1D1"],title:{text:""},credits:{enabled:false},xAxis:{categories:categories,crosshair:true},yAxis:{min:0,title:{text:""},stackLabels:{enabled:true,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}}}},plotOptions:{column:{stacking:"normal"}},series:[{name:"count",data:seriesdata,showInLegend:false}]};refreshCustomerCount();$scope.$on("$destroy",function(){$timeout.cancel(timer);stop=undefined;console.log("Cancelled Timer for main")})}).controller("LineGraphCtrl",function($scope,$http,$timeout){var categories=[];var seriesdata=[];var timer;var stop;var refreshIssueCount=function(){categories.length=0;seriesdata.length=0;$http.get("./data/issuecountbyyear.json").success(function(data,status,headers,config){$scope.data=data;angular.forEach(data,function(value,key){var xval=data[key].Year;var yval=data[key].issuecount;yval=Math.round(Math.random()*200);categories.push(xval);seriesdata.push(parseFloat(yval))})}).error(function(data,status,headers,config){});stop=$timeout(refreshIssueCount,100*60)};$scope.title="";$scope.chartConfig={options:{chart:{type:"area"},credits:{enabled:false},colors:["#26B99A","#E33805","#FCD217","#7437A6","#2CD1D1"],title:{text:""},xAxis:{categories:categories,crosshair:true,tickMarkPlacement:"on",startOnTick:false,endOnTick:false,minPadding:0,maxPadding:0,align:"left"},yAxis:{title:{text:"Count"},lineWidth:2}},plotOptions:{spline:{marker:{enable:false}}},series:[{name:"Number of Customers",data:seriesdata,fillOpacity:.1}]};refreshIssueCount();$scope.$on("$destroy",function(){$timeout.cancel(timer);stop=undefined;console.log("Cancelled Timer for main")})});var CURRENT_URL=window.location.href.split("?")[0],$BODY=$("body"),$MENU_TOGGLE=$("#menu_toggle"),$SIDEBAR_MENU=$("#sidebar-menu"),$SIDEBAR_FOOTER=$(".sidebar-footer"),$LEFT_COL=$(".left_col"),$RIGHT_COL=$(".right_col"),$NAV_MENU=$(".nav_menu"),$FOOTER=$("footer");$(document).ready(function(){var setContentHeight=function(){$RIGHT_COL.css("min-height",$(window).height());var bodyHeight=$BODY.outerHeight(),footerHeight=$BODY.hasClass("footer_fixed")?0:$FOOTER.height(),leftColHeight=$LEFT_COL.eq(1).height()+$SIDEBAR_FOOTER.height(),contentHeight=bodyHeight<leftColHeight?leftColHeight:bodyHeight;contentHeight-=$NAV_MENU.height()+footerHeight;$RIGHT_COL.css("min-height",contentHeight)};$SIDEBAR_MENU.find("a").on("click",function(ev){var $li=$(this).parent();if($li.is(".active")){$li.removeClass("active active-sm")}else{if(!$li.parent().is(".child_menu")){$SIDEBAR_MENU.find("li").removeClass("active active-sm");$SIDEBAR_MENU.find("li ul").slideUp()}$li.addClass("active")}});$MENU_TOGGLE.on("click",function(){if($BODY.hasClass("nav-md")){$SIDEBAR_MENU.find("li.active ul").hide();$SIDEBAR_MENU.find("li.active").addClass("active-sm").removeClass("active")}else{$SIDEBAR_MENU.find("li.active-sm ul").show();$SIDEBAR_MENU.find("li.active-sm").addClass("active").removeClass("active-sm")}$BODY.toggleClass("nav-md nav-sm");setContentHeight()});$SIDEBAR_MENU.find('a[href="'+CURRENT_URL+'"]').parent("li").addClass("current-page");$SIDEBAR_MENU.find("a").filter(function(){return this.href==CURRENT_URL}).parent("li").addClass("current-page").parents("ul").slideDown(function(){setContentHeight()}).parent().addClass("active");if($.fn.mCustomScrollbar){$(".menu_fixed").mCustomScrollbar({autoHideScrollbar:true,theme:"minimal",mouseWheel:{preventDefault:true}})}});$(document).ready(function(){$(".collapse-link").on("click",function(){var $BOX_PANEL=$(this).closest(".x_panel"),$ICON=$(this).find("i"),$BOX_CONTENT=$BOX_PANEL.find(".x_content");if($BOX_PANEL.attr("style")){$BOX_CONTENT.slideToggle(200,function(){$BOX_PANEL.removeAttr("style")})}else{$BOX_CONTENT.slideToggle(200);$BOX_PANEL.css("height","auto")}$ICON.toggleClass("fa-chevron-up fa-chevron-down")});$(".close-link").click(function(){var $BOX_PANEL=$(this).closest(".x_panel");$BOX_PANEL.remove()})});$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})});if($(".progress .progress-bar")[0]){$(".progress .progress-bar").progressbar()}$(document).ready(function(){if($(".js-switch")[0]){var elems=Array.prototype.slice.call(document.querySelectorAll(".js-switch"));elems.forEach(function(html){var switchery=new Switchery(html,{color:"#26B99A"})})}});$(document).ready(function(){if($("input.flat")[0]){$(document).ready(function(){$("input.flat").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"})})}});$("table input").on("ifChecked",function(){checkState="";$(this).parent().parent().parent().addClass("selected");countChecked()});$("table input").on("ifUnchecked",function(){checkState="";$(this).parent().parent().parent().removeClass("selected");countChecked()});var checkState="";$(".bulk_action input").on("ifChecked",function(){checkState="";$(this).parent().parent().parent().addClass("selected");countChecked()});$(".bulk_action input").on("ifUnchecked",function(){checkState="";$(this).parent().parent().parent().removeClass("selected");countChecked()});$(".bulk_action input#check-all").on("ifChecked",function(){checkState="all";countChecked()});$(".bulk_action input#check-all").on("ifUnchecked",function(){checkState="none";countChecked()});function countChecked(){if(checkState==="all"){$(".bulk_action input[name='table_records']").iCheck("check")}if(checkState==="none"){$(".bulk_action input[name='table_records']").iCheck("uncheck")}var checkCount=$(".bulk_action input[name='table_records']:checked").length;if(checkCount){$(".column-title").hide();$(".bulk-actions").show();$(".action-cnt").html(checkCount+" Records Selected")}else{$(".column-title").show();$(".bulk-actions").hide()}}$(document).ready(function(){$(".expand").on("click",function(){$(this).next().slideToggle(200);$expand=$(this).find(">:first-child");if($expand.text()=="+"){$expand.text("-")}else{$expand.text("+")}})});if(typeof NProgress!="undefined"){$(document).ready(function(){NProgress.start()});$(window).load(function(){NProgress.done()})}if(typeof module!=="undefined"&&typeof exports!=="undefined"&&module.exports===exports){module.exports="highcharts-ng"}(function(){"use strict";angular.module("highcharts-ng",[]).factory("highchartsNG",["$q","$window",highchartsNG]).directive("highchart",["highchartsNG","$timeout",highchart]);function indexOf(arr,find,i){if(i===undefined)i=0;if(i<0)i+=arr.length;if(i<0)i=0;for(var n=arr.length;i<n;i++)if(i in arr&&arr[i]===find)return i;return-1}function prependMethod(obj,method,func){var original=obj[method];obj[method]=function(){var args=Array.prototype.slice.call(arguments);func.apply(this,args);if(original){return original.apply(this,args)}else{return}}}function deepExtend(destination,source){if(angular.isArray(source)){destination=angular.isArray(destination)?destination:[];for(var i=0;i<source.length;i++){destination[i]=deepExtend(destination[i]||{},source[i])}}else if(angular.isObject(source)){destination=angular.isObject(destination)?destination:{};for(var property in source){destination[property]=deepExtend(destination[property]||{},source[property])}}else{destination=source}return destination}function highchartsNG($q,$window){var highchartsProm=$q.when($window.Highcharts);function getHighchartsOnce(){return highchartsProm}return{getHighcharts:getHighchartsOnce,ready:function ready(callback,thisArg){getHighchartsOnce().then(function(){callback.call(thisArg)})}}}function highchart(highchartsNGUtils,$timeout){var seriesId=0;var ensureIds=function(series){var changed=false;angular.forEach(series,function(s){if(!angular.isDefined(s.id)){s.id="series-"+seriesId++;changed=true}});return changed};var axisNames=["xAxis","yAxis"];var chartTypeMap={stock:"StockChart",map:"Map",chart:"Chart"};var getMergedOptions=function(scope,element,config){var mergedOptions={};var defaultOptions={chart:{events:{}},title:{},subtitle:{},series:[],credits:{},plotOptions:{},navigator:{enabled:false},xAxis:{events:{}},yAxis:{events:{}}};if(config.options){mergedOptions=deepExtend(defaultOptions,config.options)}else{mergedOptions=defaultOptions}mergedOptions.chart.renderTo=element[0];angular.forEach(axisNames,function(axisName){if(angular.isDefined(config[axisName])){mergedOptions[axisName]=deepExtend(mergedOptions[axisName]||{},config[axisName]);if(angular.isDefined(config[axisName].currentMin)||angular.isDefined(config[axisName].currentMax)){prependMethod(mergedOptions.chart.events,"selection",function(e){var thisChart=this;if(e[axisName]){scope.$apply(function(){scope.config[axisName].currentMin=e[axisName][0].min;scope.config[axisName].currentMax=e[axisName][0].max})}else{scope.$apply(function(){scope.config[axisName].currentMin=thisChart[axisName][0].dataMin;scope.config[axisName].currentMax=thisChart[axisName][0].dataMax})}});prependMethod(mergedOptions.chart.events,"addSeries",function(e){scope.config[axisName].currentMin=this[axisName][0].min||scope.config[axisName].currentMin;scope.config[axisName].currentMax=this[axisName][0].max||scope.config[axisName].currentMax});prependMethod(mergedOptions[axisName].events,"setExtremes",function(e){if(e.trigger&&e.trigger!=="zoom"){$timeout(function(){scope.config[axisName].currentMin=e.min;scope.config[axisName].currentMax=e.max;scope.config[axisName].min=e.min;scope.config[axisName].max=e.max},0)}})}}});if(config.title){mergedOptions.title=config.title}if(config.subtitle){mergedOptions.subtitle=config.subtitle}if(config.credits){mergedOptions.credits=config.credits}if(config.size){if(config.size.width){mergedOptions.chart.width=config.size.width}if(config.size.height){mergedOptions.chart.height=config.size.height}}return mergedOptions};var updateZoom=function(axis,modelAxis){var extremes=axis.getExtremes();if(modelAxis.currentMin!==extremes.dataMin||modelAxis.currentMax!==extremes.dataMax){if(axis.setExtremes){axis.setExtremes(modelAxis.currentMin,modelAxis.currentMax,false)}else{axis.detachedsetExtremes(modelAxis.currentMin,modelAxis.currentMax,false)}}};var processExtremes=function(chart,axis,axisName){if(axis.currentMin||axis.currentMax){chart[axisName][0].setExtremes(axis.currentMin,axis.currentMax,true)}};var chartOptionsWithoutEasyOptions=function(options){return angular.extend(deepExtend({},options),{data:null,visible:null})};var getChartType=function(scope){if(scope.config===undefined)return"Chart";return chartTypeMap[(""+scope.config.chartType).toLowerCase()]||(scope.config.useHighStocks?"StockChart":"Chart")};function linkWithHighcharts(Highcharts,scope,element,attrs){var prevSeriesOptions={};var chart=false;var processSeries=function(series,seriesOld){var i;var ids=[];if(series){var setIds=ensureIds(series);if(setIds&&!scope.disableDataWatch){return false}angular.forEach(series,function(s,idx){ids.push(s.id);var chartSeries=chart.get(s.id);if(chartSeries){if(!angular.equals(prevSeriesOptions[s.id],chartOptionsWithoutEasyOptions(s))){chartSeries.update(angular.copy(s),false)}else{if(s.visible!==undefined&&chartSeries.visible!==s.visible){chartSeries.setVisible(s.visible,false)}if(idx<seriesOld.length){var sOld=seriesOld[idx];var sCopy=angular.copy(sOld);var ptNew=s.data[s.data.length-1];sCopy.data.push(ptNew);if(angular.equals(sCopy,s)){chartSeries.addPoint(ptNew,false)}else{sCopy.data.shift();if(angular.equals(sCopy,s)){chartSeries.addPoint(ptNew,false,true)}else{chartSeries.setData(angular.copy(s.data),false)}}}else{chartSeries.setData(angular.copy(s.data),false)}}}else{chart.addSeries(angular.copy(s),false)}prevSeriesOptions[s.id]=chartOptionsWithoutEasyOptions(s)});if(scope.config.noData){var chartContainsData=false;for(i=0;i<series.length;i++){if(series[i].data&&series[i].data.length>0){chartContainsData=true;break}}if(!chartContainsData){chart.showLoading(scope.config.noData)}else{chart.hideLoading()}}}for(i=chart.series.length-1;i>=0;i--){var s=chart.series[i];if(s.options.id!=="highcharts-navigator-series"&&indexOf(ids,s.options.id)<0){s.remove(false)}}return true};var initChart=function(){if(chart)chart.destroy();prevSeriesOptions={};var config=scope.config||{};var mergedOptions=getMergedOptions(scope,element,config);var func=config.func||undefined;var chartType=getChartType(scope);chart=new Highcharts[chartType](mergedOptions,func);for(var i=0;i<axisNames.length;i++){if(config[axisNames[i]]){processExtremes(chart,config[axisNames[i]],axisNames[i])}}if(config.loading){chart.showLoading()}config.getHighcharts=function(){return chart}};initChart();if(scope.disableDataWatch){scope.$watchCollection("config.series",function(newSeries,oldSeries){processSeries(newSeries);chart.redraw()})}else{scope.$watch("config.series",function(newSeries,oldSeries){var needsRedraw=processSeries(newSeries,oldSeries);if(needsRedraw){chart.redraw()}},true)}scope.$watch("config.title",function(newTitle){chart.setTitle(newTitle,true)},true);scope.$watch("config.subtitle",function(newSubtitle){chart.setTitle(true,newSubtitle)},true);scope.$watch("config.loading",function(loading){if(loading){chart.showLoading(loading===true?null:loading)}else{chart.hideLoading()}});scope.$watch("config.noData",function(noData){if(scope.config&&scope.config.loading){chart.showLoading(noData)}},true);scope.$watch("config.credits.enabled",function(enabled){if(enabled){chart.credits.show()}else if(chart.credits){chart.credits.hide()}});scope.$watch(getChartType,function(chartType,oldChartType){if(chartType===oldChartType)return;initChart()});angular.forEach(axisNames,function(axisName){scope.$watch("config."+axisName,function(newAxes){if(!newAxes){return}if(angular.isArray(newAxes)){for(var axisIndex=0;axisIndex<newAxes.length;axisIndex++){var axis=newAxes[axisIndex];if(axisIndex<chart[axisName].length){chart[axisName][axisIndex].update(axis,false);updateZoom(chart[axisName][axisIndex],angular.copy(axis))}}}else{chart[axisName][0].update(newAxes,false);updateZoom(chart[axisName][0],angular.copy(newAxes))}chart.redraw()},true)});scope.$watch("config.options",function(newOptions,oldOptions,scope){if(newOptions===oldOptions)return;initChart();processSeries(scope.config.series);chart.redraw()},true);scope.$watch("config.size",function(newSize,oldSize){if(newSize===oldSize)return;if(newSize){chart.setSize(newSize.width||chart.chartWidth,newSize.height||chart.chartHeight)}},true);scope.$on("highchartsng.reflow",function(){chart.reflow()});scope.$on("$destroy",function(){if(chart){try{chart.destroy()}catch(ex){}$timeout(function(){element.remove()},0)}})}function link(scope,element,attrs){function highchartsCb(Highcharts){linkWithHighcharts(Highcharts,scope,element,attrs)}highchartsNGUtils.getHighcharts().then(highchartsCb)}return{restrict:"EAC",replace:true,template:"<div></div>",scope:{config:"=",disableDataWatch:"="},link:link}}})();